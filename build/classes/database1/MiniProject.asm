CODE SEGMENT
ASSUME CS:CODE
ORG 1000H

START:

MOV DX, 0FF2BH
MOV AL, 80H
OUT DX, AL

MOV BX, 1111111111111110B

BB:

LEA SI, ARR
MOV CX, 8

L1:

;ROW
MOV DX, 0FF2AH
MOV AL, [SI]
INC SI
OUT DX, AL

;COL
MOV DX, 0FF28H
MOV AL, BL
OUT DX, AL

;COL2
MOV DX, 0FF29H
MOV AL, BH
OUT DX, AL

ROL BX, 1

PUSH CX
CALL COUNT
POP CX

LOOP L1

PUSH CX
CALL COUNT2
POP CX

ROL BX, 1

JMP BB


COUNT PROC NEAR
      MOV CX, 100
      LD:
      NOP
      LOOP LD
      RET
COUNT ENDP

COUNT2 PROC NEAR
      MOV CX, 10000
      LDD:
      NOP
      LOOP LDD
      RET
COUNT2 ENDP


ARR DB 18H, 24H, 42H, 42H, 24H, 18H, 00H, 00H
END START
CODE ENDS